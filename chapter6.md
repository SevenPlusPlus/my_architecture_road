---
## 直播后台微服务架构3.0

经过三年的微服务改造，跨过重重考验，我们直播后台从单体架构升级到了微服务架构2.0，使我们信心满满，但我们还无法骄傲自满、停止不前，因为2.0架构仍然存在很多问题：如业务系统虽然得到大规模拆分，但由于一些历史原因API拆分不够，需要引入API网关进行全面管控，一些模块划分不合理、边界不清晰；对运营管理类OLAP业务支持力度不高，导致耦合严重，开发难度大；搜索类业务性能不高；房间接入能力较弱、房间业务耦合无法快速有效弹性伸缩、后端存储单点问题等等, 主要问题表现在：

- 对外提供的接入接口层上无论API还是房间node都还是单体的，这些单体应用里除了直接依赖后端繁杂的各种服务模块，还或多或少的还有自己的业务处理逻辑，这样不论接口单体应用中自身代码的鲁棒性不足还是对后端服务的依赖调用时缺乏服务治理的考虑，都会导致整个对外接口层的不稳定、甚至整体服务不可用。
- 对外提供的接口大而全，没有按照服务领域、场景、动态静态以及核心边缘等划分，影响系统的可扩展性、可定制化程度，同时对后端服务的过多耦合，也增加了系统的不稳定因素。
- 后端业务按照功能点拆分模块细而杂，模块化开发只是零散的单个开发人员为了单纯完成功能需求，没有专人去深耕和精细维护。而更好的做法是对所有的业务按领域拆分并划分开发团队，各团队的领域业务对外独立而封闭，各领域团队内部专业深耕自己负责的业务领域，对外保证提供稳定服务，从而对整体系统稳定性负责。


因此我们进一步规划设计了直播架构3.0如图：

![](/assets/直播平台后台架构3.0.png)
